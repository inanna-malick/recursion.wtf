{{- $persona := .Get "persona" -}}
{{- $lens := .Get "lens" -}}
{{- $bg := .Get "bg" | default "#f3f4f6" -}}
{{- $bgTo := .Get "bgTo" | default "#e5e7eb" -}}
{{- $border := .Get "border" | default "#6b7280" -}}
{{- $color := .Get "color" | default "#1f2937" -}}

{{- if not $persona -}}
  {{- errorf "The %q shortcode requires a 'persona' parameter: see %s" .Name .Position -}}
{{- end -}}

<aside class="stance" role="complementary" aria-labelledby="stance-{{ .Ordinal }}" 
  style="background: linear-gradient(135deg, {{ $bg }} 0%, {{ $bgTo }} 100%); 
         border-left: 5px solid {{ $border }}; 
         color: {{ $color }};">
  <div class="stance-header">
    <h4 id="stance-{{ .Ordinal }}" class="stance-persona">
      Imagine you are {{ $persona }}
      {{- if $lens }} {{ $lens }}{{- end -}}...
    </h4>
  </div>
  
  {{- if .Inner -}}
  <blockquote class="stance-content">
    {{ .Inner | .Page.RenderString }}
  </blockquote>
  {{- end -}}
</aside>